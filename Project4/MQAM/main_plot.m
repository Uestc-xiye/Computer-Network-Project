clear;clc;echo off;close all;
N=10000;
fb=1;
fs=32;
fc=4;
Kbase=2;
info=random_binary(N);
[y,I,Q]=Qam(info,Kbase,fs,fb,fc);
y1=y;y2=y;
T=length(info)/fb;m=fs/fb;nn=length(info);
dt=1/fs;t=0:dt:T-dt;
subplot(211);
plot(t(1:1000),y(1:1000),t(1:1000),I(1:1000),t(1:1000),Q(1:1000),[0 35],[0 0],'b:');
title('已调信号（In:red,Qn:green）');
n=length(y);y=fft(y)/n;y=abs(y(1:fix(n/2)))*2;
q=find(y<1e-04);y(q)=1e-04;y=20*log10(y);
f1=m/n;f=0:f1:(length(y)-1)*f1;
subplot(223);
plot(f,y,'r');
grid on;
title('已调信号频谱');xlabel('f/fb');
subplot(224);
constel(y1,fs,fb,fc);
title('星座图');